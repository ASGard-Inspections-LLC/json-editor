<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>themes</title>
    <script src="../../dist/nonmin/jsoneditor.js"></script>
    <link rel='stylesheet' id='theme_stylesheet'>
    <link rel='stylesheet' id='iconlib_stylesheet'>
  </head>
  <body>
  <div>
    <label>theme</label>
    <select id='theme_switcher' name="theme" class='form-control browser-default'>
      <option value=''></option>
      <option value='barebones'>Barebones</option>
      <option value='bootstrap2'>Bootstrap 2</option>
      <option value='bootstrap3'>Bootstrap 3</option>
      <option value='bootstrap4'>Bootstrap 4</option>
      <option value='foundation3'>Foundation 3</option>
      <option value='foundation4'>Foundation 4</option>
      <option value='foundation5'>Foundation 5</option>
      <option value='foundation6'>Foundation 6</option>
      <option value='html'>HTML</option>
      <option value='jqueryui'>jQuery UI</option>
      <option value='materialize'>Materialize</option>
      <option value='spectre'>Spectre</option>
    </select>
  </div>
  <div>
    <label>iconlib</label>
    <select id='iconlib_switcher' name="iconlib" class='form-control browser-default'>
      <option value=''></option>
      <option value='bootstrap2'>Bootstrap 2</option>
      <option value='bootstrap3'>Bootstrap 3</option>
      <option value='fontawesome3'>fontawesome 3</option>
      <option value='fontawesome4'>fontawesome 4</option>
      <option value='fontawesome5'>fontawesome 5</option>
      <option value='foundation3'>Foundation 3</option>
      <option value='jqueryui'>jQuery UI</option>
      <option value='materialicons'>Material icons</option>
      <option value='spectre'>Spectre</option>
    </select>
  </div>
    <div class="container">
      <div id="json-editor-form"></div>
    </div>
  <script>
    const schema = {
      "title": "Person",
      "type": "object",
      "required": [
        "location"
      ],
      "default": {
        "location": {
          "city": "My city"
        }
      },
      "properties": {
        "location": {
          "type": "object",
          "title": "Location",
          "defaultProperties": [
            "city"
          ],
          "properties": {
            "city": {
              "type": "string"
            },
            "state": {
              "type": "string"
            }
          }
        }
      }
    }
    let jsoneditor = null
    let theme = null
    let iconlib = null

    const initJsoneditor = (theme, iconlib) => {

      if (jsoneditor) {
        console.log('...destroy jsoneditor')
        jsoneditor.destroy();
      }

      console.log('...init jsoneditor', theme, iconlib)

      jsoneditor = new window.JSONEditor(document.querySelector("#json-editor-form"), {
        schema: schema,
        remove_button_labels: true,
        theme: theme,
        iconlib: iconlib,
      });
    }

    document.getElementById('theme_switcher').addEventListener('change', function() {
      theme = this.value || '';
      var mapping = {
        barebones: '',
        html: '',
        bootstrap2: 'https://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.min.css',
        bootstrap3: 'https://netdna.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css',
        bootstrap4: 'https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css',
        foundation3: 'https://cdnjs.cloudflare.com/ajax/libs/foundation/3.2.5/stylesheets/foundation.css',
        foundation4: 'https://cdnjs.cloudflare.com/ajax/libs/foundation/4.3.2/css/foundation.min.css',
        foundation5: 'https://cdnjs.cloudflare.com/ajax/libs/foundation/5.5.3/css/foundation.min.css',
        foundation6: 'https://cdnjs.cloudflare.com/ajax/libs/foundation/6.2.4/foundation.min.css',
        jqueryui: 'https://code.jquery.com/ui/1.10.3/themes/south-street/jquery-ui.css',
        materialize: 'https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css',
        spectre: 'https://unpkg.com/spectre.css/dist/spectre.min.css'
      };
      const link = document.querySelector('#theme_stylesheet').href = mapping[theme];
      console.log(link)
      initJsoneditor(theme, iconlib)
    });

    document.getElementById('iconlib_switcher').addEventListener('change',function() {
      iconlib = this.value || '';
      var mapping = {
        bootstrap2: 'https://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.min.css',
        bootstrap3: 'https://netdna.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css',
        fontawesome3: 'https://cdnjs.cloudflare.com/ajax/libs/font-awesome/3.2.1/css/font-awesome.css',
        fontawesome4: 'https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.0.3/css/font-awesome.css',
        fontawesome5: 'https://use.fontawesome.com/releases/v5.6.1/css/all.css',
        foundation3: 'https://cdnjs.cloudflare.com/ajax/libs/foundicons/3.0.0/foundation-icons.css',
        jqueryui: 'https://code.jquery.com/ui/1.10.3/themes/south-street/jquery-ui.css',
        materialicons: 'https://fonts.googleapis.com/icon?family=Material+Icons',
        spectre: 'https://unpkg.com/spectre.css/dist/spectre-icons.min.css'
      };

      document.querySelector('#iconlib_stylesheet').href = mapping[iconlib];
      initJsoneditor(theme, iconlib)
    });


    initJsoneditor()

  </script>
  </body>
</html>
